<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8" />
  <title>Seimo narių balsavimo panašumų ir skirtumų analizė</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 20px;
      font-size: 1.05rem;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 0.3rem;
    }

    .subtitle {
      font-size: 1rem;
      color: #555;
      margin-bottom: 0.6rem;
    }

    .source-note {
      margin: 6px 0 16px 0;
      padding: 8px 12px;
      border-left: 4px solid #555;
      background: #f9f9f9;
      font-size: 0.98rem;
      line-height: 1.4;
    }

    .source-note b {
      font-weight: 700;
    }

    label {
      font-weight: 600;
    }

    select {
      min-width: 350px;
      padding: 6px 10px;
      font-size: 1rem;
      margin: 6px 0 10px 0;
    }

    .status {
      margin-top: 6px;
      margin-bottom: 8px;
      font-size: 1rem;
      color: #555;
    }

    .explanation {
      margin-top: 12px;
      font-size: 0.95rem;
      color: #555;
      font-style: italic;
    }

    .error {
      color: #b00020;
      font-weight: 600;
      margin-top: 10px;
    }

    .filters-row {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: center;
      margin-bottom: 6px;
    }

    .filters-row > div {
      display: flex;
      flex-direction: column;
    }

    .table-wrapper {
      max-width: 100%;
      overflow-x: auto;
    }

    .table-container {
      max-height: 75vh;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      min-width: 650px;
    }

    th, td {
      border-bottom: 1px solid #e0e0e0;
      padding: 4px 8px;
      font-size: 1.05rem;
      line-height: 1.25;
    }

    th {
      background: #f6f6f6;
      text-align: left;
      font-weight: 700;
      position: sticky;
      top: 0;
      z-index: 2;
    }

    tr:nth-child(even) td {
      background: #fafafa;
    }

    .number-cell {
      text-align: right;
      white-space: nowrap;
      width: 60px;
    }

    .name-cell {
      white-space: nowrap;
      width: 260px;
    }

    .party-cell {
      white-space: nowrap;
      width: 240px;
    }

    .party-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 0.95rem;
      font-weight: 600;
      color: #fff;
      white-space: nowrap;
    }

    .sortable {
      cursor: pointer;
      user-select: none;
    }

    .sortable::after {
      content: " ⇅";
      font-size: 0.8rem;
      color: #999;
    }

    .sortable.sorted-asc::after {
      content: " ↑";
      color: #555;
    }

    .sortable.sorted-desc::after {
      content: " ↓";
      color: #555;
    }

    @media (max-width: 768px) {
      body {
        margin: 10px;
        font-size: 1rem;
      }
      h1 {
        font-size: 1.4rem;
      }
      .subtitle {
        font-size: 0.95rem;
      }
      select {
        min-width: 260px;
      }
      table {
        min-width: 600px;
      }
    }
  </style>
</head>
<body>
  <h1>Seimo narių balsavimo panašumų ir skirtumų analizė</h1>
  <div class="subtitle">
    Pasirinkite Seimo narį ir pamatysite, su kuo jis balsuoja panašiausiai ir su kuo – labiausiai skirtingai (pagal vienodų balsavimų skaičių).
  </div>

  <div class="source-note">
    <b>Privaloma šaltinio nuoroda.</b><br />
    Naudojant, cituojant ar dalinantis šioje lentelėje pateikta informacija, būtina aiškiai nurodyti šaltinį:<br />
    <em>„Duomenys paimti iš Seimo nario Vitalijaus Šeršniovo parengto šaltinio.“</em>
  </div>

  <div class="filters-row">
    <div>
      <label for="memberSelect">Pasirink vardą ir pavardę:</label>
      <select id="memberSelect" disabled>
        <option>Įkeliami duomenys...</option>
      </select>
    </div>

    <div>
      <label for="partyFilter">Filtruoti pagal partiją / frakciją:</label>
      <select id="partyFilter" disabled>
        <option value="ALL">Visos partijos</option>
      </select>
    </div>
  </div>

  <div id="status" class="status">Bandome įkelti duomenis iš „common_votes.csv“...</div>
  <div id="error" class="error" style="display:none;"></div>

  <div class="table-wrapper">
    <div class="table-container">
      <table id="resultTable">
        <thead>
          <tr>
            <th>#</th>
            <th class="sortable" data-sort-key="name">Vardas, pavardė</th>
            <th class="sortable" data-sort-key="party">Partija / frakcija</th>
            <th class="sortable" data-sort-key="votes">Vienodų balsavimų skaičius</th>
          </tr>
        </thead>
        <tbody id="resultBody"></tbody>
      </table>
    </div>
  </div>

  <div class="explanation">
    Skaičius rodo, kiek kartų pasirinktas Seimo narys ir kitas narys balsavo vienodai.
  </div>

  <!-- Likusi JS dalis identiška tavo pateiktai — nepakeista, nes neprašėte -->
  <script>
    /* VISO TAVO JAVASCRIPT KODAS ČIA – NEPAKEISTAS */
  </script>

</body>
</html>
